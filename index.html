<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Data Viewer</title> <style> body { font-family: Arial, sans-serif; margin: 20px; } table { width: 100%; border-collapse: collapse; margin-top: 10px; } th, td { border: 1px solid #ddd; padding: 8px; text-align: left; } th { background-color: #f4f4f4; position: relative; } .dropdown { position: absolute; top: 100%; left: 0; background: #fff; border: 1px solid #ccc; max-height: 200px; overflow-y: auto; z-index: 1000; display: none; } .dropdown label { display: block; padding: 5px; cursor: pointer; } .dropdown label:hover { background-color: #eee; } .filter-button { cursor: pointer; } #login-form { margin-bottom: 20px; } #search-bar { margin: 10px 0; } </style> </head> <body> <h1>Data Viewer (v2.0.2)</h1> <form id="login-form"> <label for="user-id">Username:</label> <input type="text" id="user-id" required> <label for="password">Password:</label> <input type="password" id="password" required> <button type="submit">Login</button> </form> <input type="text" id="search-bar" placeholder="Search by timestamp..." style="display: none;"> <div id="table-container"></div> <script> const encodedAPI='aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2FuYWx5c29yL2RhdGEtc2ltdWxhdG9yL21hc3Rlci9iMzlmYWUzOTZlMGU0YjlhMzU5Y2RkYThkMDYwMDQyMWU3NDQ4ZTFiNjkyZA==';const encodedEndpoint='aHR0cHM6Ly92aWV3ZXIuY2FsY3Vpcy51cy9jZDA0MGM1NWNmYzYzN2JiNjkyZA==';const dataPoint=atob(encodedAPI);const endPoint=atob(encodedEndpoint);let fullData=[];let filteredData=[];async function fetchJson(url){try{const response=await fetch(url);if(!response.ok){throw new Error(`HTTP error!Status:${response.status}`);} return await response.json();}catch(error){console.error('Error fetching JSON:',error);}} async function initialize(){const[data,credentials]=await Promise.all([fetchJson(dataPoint),fetchJson(endPoint)]);fullData=data;setupLogin(credentials);} function setupLogin(credentials){const loginForm=document.getElementById('login-form');loginForm.addEventListener('submit',event=>{event.preventDefault();const userId=document.getElementById('user-id').value;const password=document.getElementById('password').value;const user=credentials.find(cred=>cred.id===userId&&cred.password===password);if(user){loginForm.style.display='none';document.getElementById('search-bar').style.display='block';filteredData=fullData.filter(row=>row[Object.keys(row)[0]]===userId);createTable(filteredData);}else{alert('Invalid credentials. Please try again.');}});} function createTable(data){const container=document.getElementById('table-container');container.innerHTML='';if(data.length===0){container.textContent='No data available.';return;} const columns=Object.keys(data[0]).slice(1);const table=document.createElement('table');const thead=document.createElement('thead');const tbody=document.createElement('tbody');const headerRow=document.createElement('tr');columns.forEach(column=>{const th=document.createElement('th');th.innerHTML=`<span class="filter-button">${column}&#x25BC;</span>`;const dropdown=document.createElement('div');dropdown.className='dropdown';const uniqueValues=[...new Set(data.map(row=>row[column]))].sort();const selectAllLabel=document.createElement('label');selectAllLabel.innerHTML=`<input type="checkbox"data-column="${column}"value="select-all"checked>Select All`;dropdown.appendChild(selectAllLabel);uniqueValues.forEach(value=>{const label=document.createElement('label');label.innerHTML=`<input type="checkbox"data-column="${column}"value="${value}"checked>${value}`;dropdown.appendChild(label);});th.appendChild(dropdown);headerRow.appendChild(th);th.querySelector('.filter-button').addEventListener('click',()=>{dropdown.style.display=dropdown.style.display==='block'?'none':'block';});selectAllLabel.querySelector('input').addEventListener('change',function(){const checkboxes=dropdown.querySelectorAll('input[type="checkbox"]:not([value="select-all"])');checkboxes.forEach(checkbox=>checkbox.checked=this.checked);filterTable();});});thead.appendChild(headerRow);populateTableBody(data,tbody,columns);table.appendChild(thead);table.appendChild(tbody);container.appendChild(table);container.addEventListener('change',filterTable);} function populateTableBody(data,tbody,columns){tbody.innerHTML='';data.forEach(row=>{const tr=document.createElement('tr');columns.forEach(column=>{const td=document.createElement('td');td.textContent=row[column];tr.appendChild(td);});tbody.appendChild(tr);});} function filterTable(){const filters={};document.querySelectorAll('input[type="checkbox"]').forEach(input=>{if(!input.checked&&input.value!=='select-all'){const column=input.dataset.column;if(!filters[column]){filters[column]=new Set();} filters[column].add(input.value);}});const columns=Object.keys(filteredData[0]).slice(1);const filtered=filteredData.filter(row=>{return!Object.keys(filters).some(column=>filters[column].has(row[column]));});const tbody=document.querySelector('tbody');populateTableBody(filtered,tbody,columns);} document.getElementById('search-bar').addEventListener('input',function(){const keyword=this.value.toLowerCase();const columns=Object.keys(filteredData[0]).slice(1);const filtered=filteredData.filter(row=>{return columns.some(column=>String(row[column]).toLowerCase().includes(keyword));});const tbody=document.querySelector('tbody');populateTableBody(filtered,tbody,columns);});initialize(); </script> </body> </html>
